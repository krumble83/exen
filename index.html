<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="width=device-width">
		<link rel="stylesheet" type="text/css" href="css/ui.css" media="all">
		<base href="http://127.0.0.1/">
		<title>eXen</title>

		<script src="apps/exen/cmon-js/constants.js"></script>

		<script src="elibs/lodash.js"></script>
		<script src="elibs/vue.js"></script>
		<script src="elibs/vuex.js"></script>
		<script src="elibs/browser-vue-loader.js"></script>
		<script src="elibs/svg-pan-zoom.js"></script>

		<script src="ui-js/extends.js"></script>
				
		<style>

		</style>	
	</head>
	<body>
		<div id="app" />
		<script type="boom!">

			import './apps/exen/cmon-js/extends.js';

			const raw = {
			  item1: { key: 'sdfd', value:'sdfd' },
			  item2: { key: 'sdfd', value:'sdfd' },
			  item3: { key: 'sdfd', value:'sdfd' }
			};

			const allowedz = ['item1', 'item3'];


			function filterObject(object, allowed){
				return Object.keys(object)
					.filter(key => allowed.includes(key))
					.reduce((obj, key) => {
						obj[key] = object[key];
						return obj;
					}, {});
			}


			const filtered = filterObject(raw, allowedz);

			filtered.item1.value = 'zzzz'
			//console.log(filtered, raw);

			function test(){
				const zz = Math.random();
				console.log(zz);
			}
		
			Vue.config.performance = true;
			
			import {getQueryParam, loadCss} from './cmon-js/utils.js';
			
			const theme = getQueryParam('theme');
			if(theme){
				loadCss('themes/' + theme + '/' + theme + '.css');
			}
			else
				loadCss('themes/dark/dark.css');
			
			import App from './apps/exen/ui-vues/project.vue';
			//console.log(App);

			import './apps/exen/exlibs/exlib.export.js';
			import './apps/exen/exlibs/exlib.construct.js';

			import './apps/exen/exlibs/app.vue';
			
			import './apps/exen/exlibs/core/core.vue';
			import './apps/exen/exlibs/core/core.flow.vue';
			import './apps/exen/exlibs/core/core.array.vue';
			import './apps/exen/exlibs/core/core.date.vue';
			import './apps/exen/exlibs/core/core.math.vue';
			import './apps/exen/exlibs/others/special.vue';
									
			import './apps/exen/exlibs/core/core.type.vue';
			import './apps/exen/exlibs/core/core.type.int.vue';
			import './apps/exen/exlibs/core/core.type.float.vue';
			import './apps/exen/exlibs/core/core.type.bool.vue';
			import './apps/exen/exlibs/core/core.type.string.vue';
			import './apps/exen/exlibs/core/core.type.byte.vue';
			
			import './apps/exen/exlibs/arduino';
/*
			import './exlibs/arduino/arduino.core.vue';
			import './exlibs/arduino/arduino.eeprom.vue';
			import './exlibs/arduino/arduino.serial.vue';
			import './exlibs/arduino/arduino.spi.vue';
			import './exlibs/arduino/arduino.spi.vue';
			import './exlibs/arduino/arduino.sdcard.vue';
			import './exlibs/arduino/arduino.io.analog.vue';
			import './exlibs/arduino/arduino.io.digital.vue';
			import './exlibs/arduino/arduino.wifi.vue';
*/
			import './apps/exen/exlibs/arduino/hardware/arduino.hardware.mega.vue';

			import './apps/exen/exlibs/os';
			//import './exlibs/os/os.file.vue';
			//import './exlibs/web/web.vue';

			import './apps/exen/ui-vues/blueprint.graph.vue';
			import './apps/exen/ui-vues/blueprint.function.vue';
			import './apps/exen/ui-vues/blueprint.variable.vue';

			
			var test = new Vue(App);
			test.createProject();
			test.doTest();
			test.packages.push('libCore', 'libCoreDatatype', 'App', 
				'libCoreTypeInt', 'libCoreFlow', 'libCoreTypeFloat', 'libCoreArray', 'libCoreTypeBool', 'libCoreTypeString', 'libCoreTypeByte', 'libCoreDate'
				, 'arduino.core', 'arduino.stream', 'arduino.eeprom', 'arduino.serial', 'arduino.spi', 'arduino.io.digital', 'arduino.io.analog', 'arduino.sdcard', 'arduino.wifi', 'arduino.hardware.mega'
				//, 'libWeb'
				, 'core.math'
				, 'os_file'
				, 'libSpecial'
				);

		</script>
	</body>
</html>
